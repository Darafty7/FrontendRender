"use strict";(self["webpackChunksintapujos"]=self["webpackChunksintapujos"]||[]).push([[420],{6420:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var a=t(3396),o=t(7139);const i=(0,a._)("h1",null,"Imágenes",-1),l={class:"container"},r={class:"table"},s=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"Id"),(0,a._)("th",{scope:"col"},"Nombre"),(0,a._)("th",{scope:"col"},"Img"),(0,a._)("th",{scope:"col"},"Eliminar")])],-1),c=["src"],m=["onClick"];function u(e,n,t,u,g,h){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",null,[(0,a._)("input",{type:"file",onChange:n[0]||(n[0]=(...e)=>h.subirImagen&&h.subirImagen(...e))},null,32),(0,a._)("button",{onClick:n[1]||(n[1]=(...e)=>h.obtenerImagenes&&h.obtenerImagenes(...e))},"Obtener Imágenes")]),(0,a._)("div",null,[i,(0,a._)("div",l,[(0,a._)("table",r,[s,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.imagenes,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("th",null,(0,o.zw)(e.idEvento),1),(0,a._)("td",null,(0,o.zw)(e.nombre),1),(0,a._)("th",null,[(0,a._)("img",{src:h.imagenUrl(e),alt:"",width:"70",height:"70"},null,8,c)]),(0,a._)("td",null,[(0,a._)("input",{type:"button",value:"eliminar",class:"btn btn-secondary",onClick:n=>h.eliminarImagen(e.idEvento)},null,8,m)])])))),128))])])])])],64)}t(3767),t(8585),t(8696),t(2801);var g=t(2492),h=t.n(g),d=t(4161),p={name:"EventosEnfermeraComp",data(){return{imagenes:[]}},methods:{async subirImagen(e){const n=e.target.files[0];if(n&&n.type.startsWith("image/")){const e=new FormData;e.append("imagen",n);try{const n=await fetch("http://localhost:4000/imagen",{method:"POST",body:e});n.ok||console.error("Error al subir la imagen")}catch(t){console.error(t)}}},async obtenerImagenes(){try{const e=await fetch("http://localhost:4000/imagenes");if(e.ok){const n=await e.json();this.imagenes=n}}catch(e){console.log(e),h().fire({icon:"error",title:"Oops...",text:"Something went wrong!",footer:'<a href="">Why do I have this issue?</a>'})}},async eliminarImagen(e){await d.Z["delete"]("http://localhost:4000/evento/"+e).then((e=>{console.log(e),this.$swal.fire({position:"top-center",icon:"success",title:"evento eliminado correctamente.",showConfirmButton:!1,timer:1500})}))},imagenUrl(e){if(e&&e.imagen&&e.imagen.data){const n=new Uint8Array(e.imagen.data),t=btoa(String.fromCharCode.apply(null,n));return`data:image/jpg;base64,${t}`}return""}},mounted(){this.obtenerImagenes()}},b=t(89);const f=(0,b.Z)(p,[["render",u]]);var _=f}}]);
//# sourceMappingURL=420.8bef4134.js.map